<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Manager S√©nior</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { margin: 0; padding: 0; overflow: hidden; transition: background-color 0.5s, color 0.5s; }
    .top-bar {
      position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
      z-index: 100; text-align: center; cursor: pointer; user-select: none;
    }
    .datetime-top { font-size: 1.5rem; font-weight: 700; }
    .datetime-bottom {
      position: fixed; bottom: 20px; right: 20px; font-size: 1.2rem;
      z-index: 95; display: none;
    }
    .emergency-buttons {
      position: fixed; top: 10px; left: 10px; display: flex; gap: 10px; z-index: 101;
    }
    .sos-button, .ok-button {
      width: 52px; height: 52px; border-radius: 50%; border: none;
      font-size: 1.4rem; cursor: pointer;
    }
    .sos-button { background: rgba(255,50,50,0.9); color: white; }
    .ok-button { background: rgba(34,197,94,0.9); color: white; }
    .slideshow-toggle {
      position: fixed; top: 10px; right: 10px; z-index: 101;
    }
    .contacts-grid {
      position: fixed; top: 80px; left: 20px; right: 20px;
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 16px;
      z-index: 90;
      padding: 20px;
      background: rgba(0,0,0,0.7);
      border-radius: 12px;
    }
    .contact-card {
      padding: 12px; border-radius: 12px;
      text-align: center;
      display: none;
    }
    .contact-photo {
      width: 80px; height: 80px; border-radius: 50%; object-fit: cover;
    }
    .call-button {
      border: none; padding: 8px 16px;
      border-radius: 30px; font-size: 0.9rem; width: 100%; margin-top: 4px;
    }
    .slideshow {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      display: none; justify-content: center;
      align-items: center; z-index: 10;
    }
    .slideshow img {
      max-width: 95%; max-height: 90%; object-fit: contain;
      border-radius: 8px;
    }
    .alert-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      display: none;
      flex-direction: column; justify-content: center; align-items: center;
      z-index: 1000;
    }
    .alert-text { font-size: 4.2rem; font-weight: 800; margin-bottom: 30px; }
    .alert-close {
      border: none; padding: 18px 36px;
      border-radius: 30px; font-size: 1.6rem; width: 80%; max-width: 500px;
    }

    #birthdayAlert { background: #f97316; }
    #reminderAlert { background: #fbbf24; }
    #alertOverlay { background: #dc2626; }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }
    .pulse { animation: pulse 1s infinite; }

    .pagination {
      position: fixed;
      bottom: 80px; left: 50%; transform: translateX(-50%);
      z-index: 100;
      display: flex;
      gap: 12px;
    }
    .page-btn {
      width: 40px; height: 40px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }
    .page-btn.active {
      background: rgba(100,100,255,0.8);
    }
  </style>
</head>
<body id="mainBody">
  <div class="emergency-buttons">
    <button class="sos-button" id="sosButton">üÜò</button>
    <button class="ok-button" id="okButton">‚úÖ</button>
  </div>

  <div class="top-bar" id="top-bar">
    <div class="datetime-top">
      <div id="clock">--:--</div>
      <div id="date">Chargement...</div>
    </div>
  </div>

  <div class="datetime-bottom" id="datetimeBottom">
    <div id="slideshowClock">--:--</div>
    <div id="slideshowDate">Chargement...</div>
  </div>

  <button class="sos-button slideshow-toggle" id="slideshowToggle">üñºÔ∏è</button>

  <div id="slideshow" class="slideshow">
    <img id="slideshowImage" src="" alt="Diaporama">
  </div>

  <div id="contactsGrid" class="contacts-grid"></div>
  <div class="pagination" id="pagination"></div>

  <div id="alertOverlay" class="alert-overlay">
    <div class="alert-text" id="alertText">M√©dicaments !</div>
    <button class="alert-close" onclick="closeAlert()">Fermer</button>
  </div>

  <div id="birthdayAlert" class="alert-overlay">
    <div class="alert-text" id="birthdayText">Joyeux anniversaire !</div>
    <button class="alert-close" onclick="closeBirthday()">Fermer</button>
  </div>

  <div id="reminderAlert" class="alert-overlay">
    <div class="alert-text" id="reminderText">Rappel</div>
    <button class="alert-close" onclick="closeReminder()">Fermer</button>
  </div>
    <!-- üîß FEN√äTRE PARAM√àTRES (remplace Twilio) -->
  <div id="paramsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:2000; justify-content:center; align-items:center; flex-direction:column; padding:20px; box-sizing:border-box;">
    <div style="background:#1e293b; padding:20px; border-radius:16px; width:90%; max-width:600px; color:white;">
      <h3 style="margin-top:0; font-size:1.4rem;">‚öôÔ∏è Param√®tres</h3>

      <!-- SECTION TWILIO -->
      <h4 style="color:#38bdf8; margin:15px 0 10px;">üìû Communications (Twilio / WhatsApp)</h4>
      <div style="margin-bottom:14px;">
        <label style="display:block; margin-bottom:6px;">Account SID</label>
        <input type="text" id="modalSid" style="width:100%; padding:10px; border-radius:8px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="AC...">
      </div>
      <div style="margin-bottom:14px;">
        <label style="display:block; margin-bottom:6px;">Auth Token</label>
        <input type="password" id="modalToken" style="width:100%; padding:10px; border-radius:8px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
      </div>
      <div style="margin-bottom:14px;">
        <label style="display:block; margin-bottom:6px;">Num√©ro Twilio (ex: +123456789)</label>
        <input type="text" id="modalFrom" style="width:100%; padding:10px; border-radius:8px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="+1...">
      </div>
      <div style="margin-bottom:20px;">
        <label style="display:block; margin-bottom:6px;">Votre num√©ro (ex: +33612345678)</label>
        <input type="text" id="modalTo" style="width:100%; padding:10px; border-radius:8px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="+33...">
      </div>

      <!-- SECTION GITHUB / GISTS -->
      <h4 style="color:#8b5cf6; margin:20px 0 10px;">üîó Donn√©es (GitHub / Gists)</h4>
      <div style="margin-bottom:12px;">
        <label style="display:block; margin-bottom:4px;">Contacts (JSON)</label>
        <input type="text" id="modalContacts" style="width:100%; padding:8px; border-radius:6px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="https://gist.githubusercontent.com/.../contacts.json">
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; margin-bottom:4px;">Photos (JSON)</label>
        <input type="text" id="modalPhotos" style="width:100%; padding:8px; border-radius:6px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="https://gist.githubusercontent.com/.../photos.json">
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; margin-bottom:4px;">Rappels (JSON)</label>
        <input type="text" id="modalReminders" style="width:100%; padding:8px; border-radius:6px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="https://gist.githubusercontent.com/.../rappels.json">
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; margin-bottom:4px;">Anniversaires (JSON)</label>
        <input type="text" id="modalBirthdays" style="width:100%; padding:8px; border-radius:6px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="https://gist.githubusercontent.com/.../anniversaires.json">
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; margin-bottom:4px;">Alertes (JSON)</label>
        <input type="text" id="modalAlerts" style="width:100%; padding:8px; border-radius:6px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="https://gist.githubusercontent.com/.../alerte.json">
      </div>
      <div style="margin-bottom:20px;">
        <label style="display:block; margin-bottom:4px;">Th√®me (JSON)</label>
        <input type="text" id="modalDisplay" style="width:100%; padding:8px; border-radius:6px; background:#0f172a; color:white; border:1px solid #334155;" placeholder="https://gist.githubusercontent.com/.../display.json">
      </div>

      <div style="display:flex; gap:10px;">
        <button onclick="saveParams()" style="flex:1; background:linear-gradient(135deg, #6366f1, #8b5cf6); color:white; border:none; padding:12px; border-radius:10px; font-weight:600;">‚úÖ Sauvegarder</button>
        <button onclick="closeParamsModal()" style="flex:1; background:#334155; color:white; border:none; padding:12px; border-radius:10px;">‚ùå Fermer</button>
      </div>
    </div>
  </div>

  <script>
    // === CONFIGURATION INITIALE (vide) ===
    let config = JSON.parse(localStorage.getItem('manager_senior_config')) || {
      twilio: { sid: '', token: '', from: '', to: '' },
      gists: {
        contactsUrl: '',
        photosUrl: '',
        alertsUrl: '',
        remindersUrl: '',
        birthdaysUrl: '',
        displayUrl: ''
      }
    };

    let slideshowActive = false;
    let slideshowInterval = null;
    let photos = [];
    let slideshowDelay = 10000;
    let currentBgColor = "#000000";
    let currentFontColor = "#ffffff";
    let contacts = [];
    const CONTACTS_PER_PAGE = 5;
    let currentPage = 0;

    // === SAUVEGARDE ===
    function saveParams() {
      config.twilio.sid = document.getElementById('modalSid').value.trim();
      config.twilio.token = document.getElementById('modalToken').value.trim();
      config.twilio.from = document.getElementById('modalFrom').value.trim();
      config.twilio.to = document.getElementById('modalTo').value.trim();
      config.gists.contactsUrl = document.getElementById('modalContacts').value.trim();
      config.gists.photosUrl = document.getElementById('modalPhotos').value.trim();
      config.gists.alertsUrl = document.getElementById('modalAlerts').value.trim();
      config.gists.remindersUrl = document.getElementById('modalReminders').value.trim();
      config.gists.birthdaysUrl = document.getElementById('modalBirthdays').value.trim();
      config.gists.displayUrl = document.getElementById('modalDisplay').value.trim();
      localStorage.setItem('manager_senior_config', JSON.stringify(config));
      closeParamsModal();
      alert("‚úÖ Param√®tres sauvegard√©s !");
    }

    // === OUVERTURE / FERMETURE MODAL ===
    function openParamsModal() {
      document.getElementById('modalSid').value = config.twilio.sid;
      document.getElementById('modalToken').value = config.twilio.token;
      document.getElementById('modalFrom').value = config.twilio.from;
      document.getElementById('modalTo').value = config.twilio.to;
      document.getElementById('modalContacts').value = config.gists.contactsUrl;
      document.getElementById('modalPhotos').value = config.gists.photosUrl;
      document.getElementById('modalAlerts').value = config.gists.alertsUrl;
      document.getElementById('modalReminders').value = config.gists.remindersUrl;
      document.getElementById('modalBirthdays').value = config.gists.birthdaysUrl;
      document.getElementById('modalDisplay').value = config.gists.displayUrl;
      document.getElementById('paramsModal').style.display = 'flex';
    }
    function closeParamsModal() {
      document.getElementById('paramsModal').style.display = 'none';
    }

    // === DOUBLE-CLIC SUR L'HORLOGE ===
    const clockEl = document.getElementById('clock');
    let tapCount = 0;
    function handleDoubleTap() {
      tapCount++;
      setTimeout(() => { tapCount = 0; }, 500);
      if (tapCount === 2) openParamsModal();
    }
    clockEl.addEventListener('click', handleDoubleTap);
    clockEl.addEventListener('touchend', (e) => { e.preventDefault(); handleDoubleTap(); });

    // === TH√àME ===
    function applyTheme(bgColor, fontSize) {
      const body = document.getElementById('mainBody');
      body.style.backgroundColor = bgColor;
      currentBgColor = bgColor;
      const r = parseInt(bgColor.substr(1,2),16);
      const g = parseInt(bgColor.substr(3,2),16);
      const b = parseInt(bgColor.substr(5,2),16);
      const brightness = (r * 299 + g * 587 + b * 114) / 1000;
      currentFontColor = brightness > 128 ? "#000000" : "#ffffff";
      body.style.color = currentFontColor;
      const fontSizeMap = { small: '14px', normal: '16px', large: '20px' };
      document.body.style.fontSize = fontSizeMap[fontSize] || '16px';
      renderContacts();
    }

    // === CONTACTS ===
    function renderContacts() {
      const start = currentPage * CONTACTS_PER_PAGE;
      const end = start + CONTACTS_PER_PAGE;
      const pageContacts = contacts.slice(start, end);
      const container = document.getElementById('contactsGrid');
      container.innerHTML = '';
      pageContacts.forEach(contact => {
        const card = document.createElement('div');
        card.className = 'contact-card';
        card.style.display = 'block';
        const cardBg = currentFontColor === "#ffffff" ? "#1e293b" : "#f1f5f9";
        card.innerHTML = `
          <img src="${contact.photo || 'https://via.placeholder.com/80'}" class="contact-photo" onerror="this.src='https://via.placeholder.com/80?text=Photo'">
          <div style="font-weight:700; margin-bottom:6px;">${contact.name || 'Contact'}</div>
          ${contact.phone ? `<button class="call-button" style="background:#4ade80; color:#000000;" onclick="callPhone('${contact.phone}')">üìû</button>` : ''}
          ${contact.messenger || contact.video ? `<button class="call-button" style="background:#3b82f6; color:white;" onclick="callVideo('${contact.messenger || contact.video}')">üìπ</button>` : ''}
        `;
        container.appendChild(card);
      });
      renderPagination();
    }

    function renderPagination() {
      const totalPages = Math.ceil(contacts.length / CONTACTS_PER_PAGE);
      const paginationEl = document.getElementById('pagination');
      paginationEl.innerHTML = '';
      if (totalPages <= 1) {
        paginationEl.style.display = 'none';
        return;
      }
      paginationEl.style.display = 'flex';
      for (let i = 0; i < totalPages; i++) {
        const btn = document.createElement('button');
        btn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
        btn.textContent = i + 1;
        btn.onclick = () => { currentPage = i; renderContacts(); };
        paginationEl.appendChild(btn);
      }
    }

    // === HORLOGE ===
    function updateClock() {
      const now = new Date();
      document.getElementById('clock').textContent = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
      document.getElementById('date').textContent = now.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });
      document.getElementById('slideshowClock').textContent = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
      document.getElementById('slideshowDate').textContent = now.toLocaleDateString('fr-FR', { weekday: 'short', day: 'numeric', month: 'short' });
    }
    setInterval(updateClock, 1000);
    updateClock();

    // === CHARGEMENT DES DONN√âES (SEULEMENT SI LIEN FOURNI) ===
    async function loadDisplaySettings() {
      if (!config.gists.displayUrl) return applyTheme('#000000', 'normal');
      try {
        const res = await fetch(config.gists.displayUrl + "?t=" + Date.now());
        const settings = await res.json();
        slideshowDelay = settings.slideshowDelay ? parseInt(settings.slideshowDelay) * 1000 : 10000;
        const bgColor = settings.bgColor || '#000000';
        const fontSize = settings.fontSize || 'normal';
        applyTheme(bgColor, fontSize);
      } catch (e) {
        applyTheme('#000000', 'normal');
      }
    }
    async function loadPhotos() {
      if (!config.gists.photosUrl) return;
      try {
        const res = await fetch(config.gists.photosUrl + "?t=" + Date.now());
        const data = await res.json();
        photos = data.photos || [];
        if (photos.length > 0) document.getElementById('slideshowImage').src = photos[0];
      } catch (e) { console.error("Photos:", e); }
    }
    async function loadContacts() {
      if (!config.gists.contactsUrl) return;
      try {
        const res = await fetch(config.gists.contactsUrl + "?t=" + Date.now());
        const data = await res.json();
        contacts = data.contacts || [];
        renderContacts();
      } catch (e) { console.error("Contacts:", e); }
    }

    // === APPELS ===
    function callPhone(phone) {
      const clean = phone.replace(/\D/g, '');
      window.location.href = `https://wa.me/${clean}`;
    }
    function callVideo(url) {
      if (!url.startsWith('http')) url = 'https://' + url;
      window.location.href = url;
    }

    // === ALERTES ===
    let lastAlertTimestamp = 0;
    async function checkManualAlert() {
      if (!config.gists.alertsUrl) return;
      try {
        const res = await fetch(config.gists.alertsUrl + "?t=" + Date.now());
        const data = await res.json();
        if (data.alert && data.timestamp > lastAlertTimestamp) {
          lastAlertTimestamp = data.timestamp;
          if (data.alert.trim() === "") { closeAlert(); return; }
          document.getElementById('alertText').textContent = data.alert;
          const el = document.getElementById('alertOverlay');
          el.style.display = 'flex';
          el.style.background = '#dc2626';
          el.classList.add('pulse');
        }
      } catch (e) { console.error("Alerte:", e); }
    }
    setInterval(checkManualAlert, 5000);

    // === ANNIVERSAIRES ===
    let lastBirthdayCheck = null;
    async function checkBirthdays() {
      if (!config.gists.birthdaysUrl) return;
      const now = new Date();
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      const todayStr = `${month}-${day}`;
      if (lastBirthdayCheck === todayStr) return;
      try {
        const res = await fetch(config.gists.birthdaysUrl + "?t=" + Date.now());
        const data = await res.json();
        const todayBirthdays = (data.birthdays || []).filter(b => {
          const bDate = new Date(b.birthdayDate);
          const bMonth = String(bDate.getMonth() + 1).padStart(2, '0');
          const bDay = String(bDate.getDate()).padStart(2, '0');
          return bMonth === month && bDay === day;
        });
        if (todayBirthdays.length > 0) {
          lastBirthdayCheck = todayStr;
          const names = todayBirthdays.map(b => b.birthdayName).join(", ");
          document.getElementById('birthdayText').textContent = `üéÇ Joyeux anniversaire √† ${names} !`;
          const el = document.getElementById('birthdayAlert');
          el.style.display = 'flex';
          el.style.background = '#f97316';
          el.classList.add('pulse');
        }
      } catch (e) { console.error("Anniversaires:", e); }
    }
    setInterval(checkBirthdays, 60000);

    // === RAPPELS ===
    let lastReminderCheck = null;
    async function checkReminders() {
      if (!config.gists.remindersUrl) return;
      const now = new Date();
      const nowTime = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
      const today = now.toLocaleDateString('fr-FR', { weekday: 'long' }).toLowerCase();
      const todayShort = now.toLocaleDateString('fr-FR', { weekday: 'short' }).toLowerCase();
      const checkKey = nowTime + '-' + today;
      if (lastReminderCheck === checkKey) return;
      try {
        const res = await fetch(config.gists.remindersUrl + "?t=" + Date.now());
        const data = await res.json();
        const matching = (data.reminders || []).find(r => {
          const jourMatch = r.jour === 'tous' || r.jour.toLowerCase() === today || r.jour.toLowerCase() === todayShort;
          return r.heure === nowTime && jourMatch;
        });
        if (matching) {
          lastReminderCheck = checkKey;
          document.getElementById('reminderText').textContent = matching.texte;
          const el = document.getElementById('reminderAlert');
          el.style.display = 'flex';
          el.style.background = '#fbbf24';
          el.classList.add('pulse');
        }
      } catch (e) { console.error("Rappels:", e); }
    }
    setInterval(checkReminders, 60000);

    // === DIAPORAMA ===
    function startSlideshow() {
      if (photos.length === 0) return;
      slideshowActive = true;
      document.getElementById('slideshow').style.display = 'flex';
      document.getElementById('datetimeBottom').style.display = 'block';
      document.getElementById('contactsGrid').style.display = 'none';
      document.getElementById('pagination').style.display = 'none';
      document.getElementById('top-bar').style.display = 'none';
      let index = 0;
      document.getElementById('slideshowImage').src = photos[index];
      clearInterval(slideshowInterval);
      slideshowInterval = setInterval(() => {
        index = (index + 1) % photos.length;
        document.getElementById('slideshowImage').src = photos[index];
      }, slideshowDelay);
    }
    function stopSlideshow() {
      slideshowActive = false;
      clearInterval(slideshowInterval);
      document.getElementById('slideshow').style.display = 'none';
      document.getElementById('datetimeBottom').style.display = 'none';
      document.getElementById('contactsGrid').style.display = 'grid';
      document.getElementById('pagination').style.display = 'flex';
      document.getElementById('top-bar').style.display = 'block';
      renderContacts();
    }
    document.getElementById('slideshowToggle').addEventListener('click', () => {
      if (slideshowActive) stopSlideshow();
      else startSlideshow();
    });

    // === FERMETURE ALERTES ===
    function closeAlert() { document.getElementById('alertOverlay').style.display = 'none'; document.getElementById('alertOverlay').classList.remove('pulse'); }
    function closeBirthday() { document.getElementById('birthdayAlert').style.display = 'none'; document.getElementById('birthdayAlert').classList.remove('pulse'); }
    function closeReminder() { document.getElementById('reminderAlert').style.display = 'none'; document.getElementById('reminderAlert').classList.remove('pulse'); }

    // === TWILIO (ALERTE + OK) ===
    async function sendTwilioMessage(message) {
      const { sid, token, from, to } = config.twilio;
      if (!sid || !token || !from || !to) {
        alert("‚ö†Ô∏è Configurez Twilio (double-tap sur l‚Äôhorloge).");
        return;
      }
      try {
        const url = `https://api.twilio.com/2010-04-01/Accounts/${sid}/Messages.json`;
        const data = new URLSearchParams({ To: to, From: from, Body: message });
        const response = await fetch(url, {
          method: 'POST',
          headers: { 'Authorization': 'Basic ' + btoa(`${sid}:${token}`), 'Content-Type': 'application/x-www-form-urlencoded' },
          body: data
        });
        if (!response.ok) throw new Error("Twilio a refus√© la requ√™te");
      } catch (e) {
        console.error("‚ùå Erreur Twilio :", e);
        alert("‚ùå Impossible d‚Äôenvoyer le SMS.\nV√©rifiez les param√®tres Twilio.");
      }
    }

    let sosClicks = 0;
    document.getElementById('sosButton').addEventListener('click', () => {
      sosClicks++; setTimeout(() => sosClicks = 0, 1500);
      if (sosClicks === 2) {
        sosClicks = 0;
        sendTwilioMessage("üö® ALERTE URGENCE\nJe suis en danger.");
        document.getElementById('alertText').textContent = "ALERTE D'URGENCE ENVOY√âE !";
        const el = document.getElementById('alertOverlay');
        el.style.display = 'flex';
        el.style.background = '#dc2626';
        el.classList.add('pulse');
      }
    });

    let okClicks = 0;
    document.getElementById('okButton').addEventListener('click', () => {
      okClicks++; setTimeout(() => okClicks = 0, 1500);
      if (okClicks === 2) {
        okClicks = 0;
        sendTwilioMessage("‚úÖ Je vais bien");
        document.getElementById('okButton').innerHTML = 'üíô';
        setTimeout(() => document.getElementById('okButton').innerHTML = '‚úÖ', 2000);
      }
    });

    // === INITIALISATION ===
    loadDisplaySettings();
    loadPhotos();
    loadContacts();
  </script>
</body>
</html>
